!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=document.querySelector(".profile__info-edit"),o=document.querySelector(".popup__form"),i=document.querySelector(".elements"),u=document.querySelector(".profile__add-button"),a=o.querySelector(".popup__input_name"),s=o.querySelector(".popup__input_job"),c={formSelector:".popup__form",formEdit:"#js-edit",formCreate:"#js-create",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_inactive",inputErrorClass:".popup__input_error",inputInvalid:"popup__input_invalid",errorClass:"popup__input_error_active"};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._template=n,this._handleCardClick=r}var t,n,r;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.cloneNode(!0).children[0]}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__photo").src=this._link,this._element.querySelector(".element__photo").alt=this._name,this._element.querySelector(".element__heading").textContent=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like").addEventListener("click",(function(){e._like()})),this._element.querySelector(".element__delete").addEventListener("click",(function(){e._deleteCard()})),this._element.querySelector(".element__photo").addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"_like",value:function(){this._element.querySelector(".element__like").classList.toggle("element__like_state_active")}},{key:"_deleteCard",value:function(){this._element.remove(),this._element=null}}])&&l(t.prototype,n),r&&l(t,r),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=n.formSelector,this._formElement=document.querySelector(t),this._inputSelector=n.inputSelector,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButtonSelector=n.submitButtonSelector,this._submit=this._formElement.querySelector(this._submitButtonSelector),this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._inputInvalid=n.inputInvalid,this._errorClass=n.errorClass}var t,n,r;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e){if(e.validity.valid)this._hideInputError(e),e.classList.remove(this._inputInvalid);else{var t=e.validationMessage;e.classList.add(this._inputInvalid),this._showInputError(e,t)}}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submit.classList.add(this._inactiveButtonClass),this._submit.setAttribute("disabled",!0)):(this._submit.classList.remove(this._inactiveButtonClass),this._submit.removeAttribute("disabled"))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"clearValidation",value:function(){var e=this;this._toggleButtonState(),this._hasInvalidInput()&&(this._formElement.querySelector(this._inputErrorClass).textContent=""),this._inputList.forEach((function(t){t.classList.remove(e._inputInvalid)})),Array.from(this._formElement.querySelectorAll(this._inputErrorClass)).forEach((function(t){t.classList.remove(e._errorClass)}))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&f(t.prototype,n),r&&f(t,r),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t)}var t,n,r;return t=e,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_is-opened"),document.addEventListener("keyup",this._handleEscClose.bind(this))}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_is-opened"),document.removeEventListener("keyup",this._handleEscClose.bind(this))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"setEventListeners",value:function(){var e=this;document.addEventListener("keyup",this._handleEscClose.bind(this)),this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.closePopup()})),this._popup.addEventListener("click",(function(t){t.target===t.currentTarget&&e.closePopup()}))}}])&&d(t.prototype,n),r&&d(t,r),e}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,o=g(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e))._popupSelector=document.querySelector(e),n._formSubmit=t,n._form=n._popupSelector.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__input"),n}return t=i,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputObj={},this._inputList.forEach((function(t){e._inputObj[t.name]=t.value})),this._inputObj}},{key:"closePopup",value:function(){v(k(i.prototype),"closePopup",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;v(k(i.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e._formSubmit(e._getInputValues()),e.closePopup()}))}}])&&y(t.prototype,n),r&&y(t,r),i}(h);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,r,o=L(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e))._title=document.querySelector(t.title),n._image=document.querySelector(t.image),n}return t=i,(n=[{key:"openPopup",value:function(e,t){C(q(i.prototype),"openPopup",this).call(this),this._title.textContent=e,this._image.alt=e,this._image.src=t}}])&&w(t.prototype,n),r&&w(t,r),i}(h);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._containerSelector=n}var t,n,r;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._containerSelector.append(e)}}])&&x(t.prototype,n),r&&x(t,r),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t.name),this._job=document.querySelector(t.job)}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._job.textContent=e.job}}])&&T(t.prototype,n),r&&T(t,r),e}(),V=new I("#js-image",{title:".popup__title_content-heading",image:".popup__image"});V.setEventListeners();var D=new R({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=new p(e,".element-template",V.openPopup.bind(V)).generateCard();D.addItem(t)}},i);D.renderItems();var A=new B({name:".profile__info-name",job:".profile__info-job"}),M=new E("#js-edit",(function(e){A.setUserInfo(e)}));M.setEventListeners();var U=new E("#js-create",(function(e){var t=new p(e,".element-template",V.openPopup.bind(V)).generateCard();i.prepend(t)}));U.setEventListeners(),u.addEventListener("click",(function(){U.openPopup(),N.clearValidation()})),r.addEventListener("click",(function(){M.openPopup();var e=A.getUserInfo();a.value=e.name,s.value=e.job,z.clearValidation()}));var z=new _(c.formEdit,c);z.enableValidation();var N=new _(c.formCreate,c);N.enableValidation()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL2Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9wb3B1cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9wb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy91c2VySW5mby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInBvcHVwT3BlbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvcm1FbGVtZW50IiwiY2FyZEVsZW1lbnRzIiwiYWRkQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJmb3JtRWRpdCIsImZvcm1DcmVhdGUiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRJbnZhbGlkIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJvcHRpb25zIiwidGVtcGxhdGUiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJfdGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsImNoaWxkcmVuIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfbGlrZSIsIl9kZWxldGVDYXJkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsIl9mb3JtU2VsZWN0b3IiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3N1Ym1pdCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9pbnB1dEludmFsaWQiLCJfZXJyb3JDbGFzcyIsImlucHV0SXRlbSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiZXJyb3JJdGVtIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZVBvcHVwIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0IiwiX3BvcHVwU2VsZWN0b3IiLCJfZm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0T2JqIiwiaXRlbSIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJkYXRhIiwiX3RpdGxlIiwidGl0bGUiLCJfaW1hZ2UiLCJpbWFnZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyU2VsZWN0b3IiLCJlbGVtZW50IiwiYXBwZW5kIiwiVXNlckluZm8iLCJfam9iIiwiam9iIiwicG9wdXBXaXRoSW1nIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJpbml0aWFsR2FsbGVyeSIsImNhcmRFbGVtZW50Iiwib3BlblBvcHVwIiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiZ2V0SW5mbyIsImVkaXRQb3B1cCIsInNldFVzZXJJbmZvIiwiY3JlYXRlUG9wdXAiLCJwcmVwZW5kIiwiZm9ybUNyZWF0ZVZhbGlkYXRvciIsImNsZWFyVmFsaWRhdGlvbiIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJmb3JtRWRpdFZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxF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VUYsR0FDN0QwSCxFQUFrQkMsbUJBRWxCLElBQU1MLEVBQXNCLElBQUluRixFQUFjbkMsRUFBT0csV0FBWUgsR0FDakVzSCxFQUFvQksiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJyxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZycsXHJcbiAgfVxyXG5dO1xyXG5jb25zdCBwb3B1cE9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW5mby1lZGl0Jyk7XHJcbmNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbmNvbnN0IGNhcmRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X25hbWUnKTtcclxuY29uc3Qgam9iSW5wdXQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X2pvYicpO1xyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICBmb3JtRWRpdDogJyNqcy1lZGl0JyxcclxuICBmb3JtQ3JlYXRlOiAnI2pzLWNyZWF0ZScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQnLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0X2luYWN0aXZlJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICcucG9wdXBfX2lucHV0X2Vycm9yJyxcclxuICBpbnB1dEludmFsaWQ6ICdwb3B1cF9faW5wdXRfaW52YWxpZCcsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF9lcnJvcl9hY3RpdmUnXHJcbn1cclxuY29uc3QgcG9wdXBJbWFnZVdpdGhDb25maWcgPSB7XHJcbiAgdGl0bGU6ICcucG9wdXBfX3RpdGxlX2NvbnRlbnQtaGVhZGluZycsXHJcbiAgaW1hZ2U6ICcucG9wdXBfX2ltYWdlJyxcclxufVxyXG5jb25zdCB1c2VyRGF0YSA9IHtcclxuICBuYW1lOiAnLnByb2ZpbGVfX2luZm8tbmFtZScsXHJcbiAgam9iOiAnLnByb2ZpbGVfX2luZm8tam9iJyxcclxufVxyXG5cclxuZXhwb3J0IHsgaW5pdGlhbENhcmRzLCBwb3B1cE9wZW4sIGZvcm1FbGVtZW50LCBjYXJkRWxlbWVudHMsIGFkZEJ1dHRvbiwgbmFtZUlucHV0LCBqb2JJbnB1dCwgY29uZmlnLCBwb3B1cEltYWdlV2l0aENvbmZpZywgdXNlckRhdGEgfSIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCB0ZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gb3B0aW9ucy5uYW1lLFxyXG4gICAgICB0aGlzLl9saW5rID0gb3B0aW9ucy5saW5rLFxyXG4gICAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlLFxyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2tcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKS5jaGlsZHJlblswXTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waG90bycpLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waG90bycpLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19oZWFkaW5nJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2xpa2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmQoKTtcclxuICAgIH0pXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waG90bycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgX2xpa2UoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9zdGF0ZV9hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZvcm1TZWxlY3RvciwgY29uZmlnKSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBjb25maWcuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEludmFsaWQgPSBjb25maWcuaW5wdXRJbnZhbGlkO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gIH1cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRJdGVtLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0SXRlbS5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEl0ZW0pIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0SXRlbS5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEl0ZW0pIHtcclxuICAgIGNvbnN0IGlzSW5wdXROb3RWYWxpZCA9ICFpbnB1dEl0ZW0udmFsaWRpdHkudmFsaWQ7XHJcbiAgICBpZiAoaXNJbnB1dE5vdFZhbGlkKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0SXRlbS52YWxpZGF0aW9uTWVzc2FnZVxyXG4gICAgICBpbnB1dEl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEludmFsaWQpO1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEl0ZW0sIGVycm9yTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEl0ZW0pO1xyXG4gICAgICBpbnB1dEl0ZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEludmFsaWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgY29uc3QgaGFzSW52YWxpZElucHV0ID0gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgICByZXR1cm4gaGFzSW52YWxpZElucHV0O1xyXG4gIH1cclxuXHJcbiAgY2xlYXJWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKVxyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5wdXRFcnJvckNsYXNzKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEl0ZW0pID0+IHtcclxuICAgICAgaW5wdXRJdGVtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRJbnZhbGlkKTtcclxuXHJcbiAgICB9KVxyXG4gICAgY29uc3QgZXJyb3JMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0RXJyb3JDbGFzcykpO1xyXG4gICAgZXJyb3JMaXN0LmZvckVhY2goKGVycm9ySXRlbSkgPT4ge1xyXG4gICAgICBlcnJvckl0ZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRJdGVtKSA9PiB7XHJcbiAgICAgIGlucHV0SXRlbS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRJdGVtKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgIH0pXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2lzLW9wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9pcy1vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xyXG4gICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KVxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQgIT09IGUuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vcG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0T2JqID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dE9ialtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0T2JqO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9mb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH0pXHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4uL2NvbXBvbmVudHMvcG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZGF0YSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS50aXRsZSk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS5pbWFnZSk7XHJcbiAgfVxyXG5cclxuICBvcGVuUG9wdXAodGl0bGUsIGltYWdlKSB7XHJcbiAgICBzdXBlci5vcGVuUG9wdXAoKTtcclxuXHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBpbWFnZTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXJTZWxlY3RvciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXJTZWxlY3Rvci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRhdGEubmFtZSk7XHJcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRhdGEuam9iKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gZGF0YS5qb2I7XHJcbiAgfVxyXG59IiwiaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xyXG5pbXBvcnQgeyBwb3B1cE9wZW4sIGluaXRpYWxDYXJkcywgY2FyZEVsZW1lbnRzLCBhZGRCdXR0b24sIG5hbWVJbnB1dCwgam9iSW5wdXQsIGNvbmZpZywgcG9wdXBJbWFnZVdpdGhDb25maWcsIHVzZXJEYXRhIH0gZnJvbSAnLi91dGlscy9jb25zdGFudHMuanMnXHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuL2NvbXBvbmVudHMvY2FyZC5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qcydcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi9jb21wb25lbnRzL3BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi9jb21wb25lbnRzL3BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi9jb21wb25lbnRzL3NlY3Rpb24uanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi9jb21wb25lbnRzL3VzZXJJbmZvLmpzJztcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltZyA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI2pzLWltYWdlJywgcG9wdXBJbWFnZVdpdGhDb25maWcpO1xyXG5wb3B1cFdpdGhJbWcuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5jb25zdCBpbml0aWFsR2FsbGVyeSA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgJy5lbGVtZW50LXRlbXBsYXRlJywgcG9wdXBXaXRoSW1nLm9wZW5Qb3B1cC5iaW5kKHBvcHVwV2l0aEltZykpO1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgIGluaXRpYWxHYWxsZXJ5LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH0sIGNhcmRFbGVtZW50c1xyXG4pXHJcblxyXG5pbml0aWFsR2FsbGVyeS5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgZ2V0SW5mbyA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YSk7XHJcblxyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnI2pzLWVkaXQnLCAoZGF0YSkgPT4ge1xyXG4gIGdldEluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbn0pO1xyXG5cclxuZWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjcmVhdGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjanMtY3JlYXRlJywgKGRhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgJy5lbGVtZW50LXRlbXBsYXRlJywgcG9wdXBXaXRoSW1nLm9wZW5Qb3B1cC5iaW5kKHBvcHVwV2l0aEltZykpO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICBjYXJkRWxlbWVudHMucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbn0pO1xyXG5cclxuY3JlYXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5cclxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNyZWF0ZVBvcHVwLm9wZW5Qb3B1cCgpO1xyXG4gIGZvcm1DcmVhdGVWYWxpZGF0b3IuY2xlYXJWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxucG9wdXBPcGVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGVkaXRQb3B1cC5vcGVuUG9wdXAoKTtcclxuICBjb25zdCB1c2VyRGF0YSA9IGdldEluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gIGpvYklucHV0LnZhbHVlID0gdXNlckRhdGEuam9iO1xyXG4gIGZvcm1FZGl0VmFsaWRhdG9yLmNsZWFyVmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcblxyXG5cclxuY29uc3QgZm9ybUVkaXRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcuZm9ybUVkaXQsIGNvbmZpZyk7XHJcbmZvcm1FZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1DcmVhdGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcuZm9ybUNyZWF0ZSwgY29uZmlnKTtcclxuZm9ybUNyZWF0ZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=document.querySelector(".profile__info-edit"),o=document.querySelector(".popup__form"),i=document.querySelector(".elements"),u=document.querySelector(".profile__add-button"),a=o.querySelector(".popup__input_name"),c=o.querySelector(".popup__input_job"),s=document.querySelector("#js-create"),l=document.querySelector("#js-confirm"),f=document.querySelector("#js-update"),p=document.querySelector("#js-image"),h=document.querySelector("#js-edit"),_=(document.querySelector(".profile__info-name"),document.querySelector(".profile__info-job"),document.querySelector(".profile__image")),d=document.querySelector(".profile__edit"),y={formSelector:".popup__form",formEdit:"#js-edit",formCreate:"#js-create",formEditAvatar:"#js-update",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_inactive",inputErrorClass:".popup__input_error",inputInvalid:"popup__input_invalid",errorClass:"popup__input_error_active"};function m(e,t){e.querySelector(".popup__submit").textContent=t}function v(e,t){e.querySelector(".popup__submit").textContent=t}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t){var n=t.options,r=t.template,o=t.handleCardClick,i=t.myId,u=t.handleDeleteCard,a=t.handleLikeCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n.name,this._link=n.link,this._template=r,this._handleCardClick=o,this._likes=n.likes,this._myId=i,this._handleDeleteCard=u,this._cardID=n._id,this._ownerID=n.owner._id,this._handleLikeCard=a}var t,n,r;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.cloneNode(!0).children[0]}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".element__photo").src=this._link,this._element.querySelector(".element__photo").alt=this._name,this._element.querySelector(".element__heading").textContent=this._name,this._checkCardId()||this._element.querySelector(".element__delete").classList.add("element__delete_isHidden"),this._likeElement=this._element.querySelector(".element__like"),this.renderLike(),this._setEventListeners(),this._element}},{key:"_checkCardId",value:function(){return this._ownerID===this._myId}},{key:"_setEventListeners",value:function(){var e=this;this._likeElement.addEventListener("click",(function(){e._handleLikeCard(e)})),this._element.querySelector(".element__delete").addEventListener("click",(function(){e._handleDeleteCard(e)})),this._element.querySelector(".element__photo").addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"renderLike",value:function(){this._element.querySelector(".element__like-counter").textContent=this._likes.length,this.isLiked?this._likeElement.classList.add("element__like_state_active"):this._likeElement.classList.remove("element__like_state_active")}},{key:"updateLikes",value:function(e){this._likes=e.likes,this.renderLike()}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"isLiked",get:function(){var e=this;return this._likes.some((function(t){return t._id===e._myId}))}},{key:"id",get:function(){return this._cardID}}])&&b(t.prototype,n),r&&b(t,r),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=n.formSelector,this._formElement=document.querySelector(t),this._inputSelector=n.inputSelector,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButtonSelector=n.submitButtonSelector,this._submit=this._formElement.querySelector(this._submitButtonSelector),this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._inputInvalid=n.inputInvalid,this._errorClass=n.errorClass}var t,n,r;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e){if(e.validity.valid)this._hideInputError(e),e.classList.remove(this._inputInvalid);else{var t=e.validationMessage;e.classList.add(this._inputInvalid),this._showInputError(e,t)}}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submit.classList.add(this._inactiveButtonClass),this._submit.setAttribute("disabled",!0)):(this._submit.classList.remove(this._inactiveButtonClass),this._submit.removeAttribute("disabled"))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"clearValidation",value:function(){var e=this;this._toggleButtonState(),this._hasInvalidInput()&&(this._formElement.querySelector(this._inputErrorClass).textContent=""),this._inputList.forEach((function(t){t.classList.remove(e._inputInvalid)})),Array.from(this._formElement.querySelectorAll(this._inputErrorClass)).forEach((function(t){t.classList.remove(e._errorClass)}))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&g(t.prototype,n),r&&g(t,r),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n,r;return t=e,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_is-opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_is-opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.closePopup()})),this._popup.addEventListener("click",(function(t){t.target===t.currentTarget&&e.closePopup()}))}}])&&E(t.prototype,n),r&&E(t,r),e}();function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,r,o=L(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e))._popupSelector=e,n._formSubmit=t,n._form=n._popupSelector.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__input"),n._submit=n._form.querySelector(".popup__submit"),n._defaultSubmitText=n._submit.textContent,n}return t=i,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputObj={},this._inputList.forEach((function(t){e._inputObj[t.name]=t.value})),this._inputObj}},{key:"closePopup",value:function(){P(q(i.prototype),"closePopup",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;P(q(i.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e._formSubmit(e._getInputValues()),e.closePopup()}))}}])&&w(t.prototype,n),r&&w(t,r),i}(C);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(i,e);var t,n,r,o=U(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e))._title=document.querySelector(t.title),n._image=document.querySelector(t.image),n}return t=i,(n=[{key:"openPopup",value:function(e,t){D(V(i.prototype),"openPopup",this).call(this),this._title.textContent=e,this._image.alt=e,this._image.src=t}}])&&R(t.prototype,n),r&&R(t,r),i}(C);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._containerSelector=n}var t,n,r;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e){this._containerSelector.append(e)}}])&&M(t.prototype,n),r&&M(t,r),e}();function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t.name),this._about=document.querySelector(t.about),this._profileImage=document.querySelector(t.avatar)}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._profileImage.src}}},{key:"setUserInfo",value:function(e){e&&(this._name.textContent=e.name,this._about.textContent=e.about,this._profileImage.src=e.avatar)}}])&&H(t.prototype,n),r&&H(t,r),e}();function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.group=n,this.token=r}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"v1/").concat(this.group,"/users/me"),{headers:{authorization:this.token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status," - ").concat(e.statusText))}))}},{key:"getCards",value:function(){return fetch("".concat(this.baseUrl,"v1/").concat(this.group,"/cards"),{headers:{authorization:this.token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status," - ").concat(e.statusText))}))}},{key:"setUserInfo",value:function(e){return fetch("".concat(this.baseUrl,"v1/").concat(this.group,"/users/me"),{method:"PATCH",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status," - ").concat(e.statusText))}))}},{key:"addCard",value:function(e,t){return fetch("".concat(this.baseUrl,"v1/").concat(this.group,"/cards"),{method:"POST",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status," - ").concat(e.statusText))}))}},{key:"setLike",value:function(e,t){var n=t?"DELETE":"PUT";return fetch("".concat(this.baseUrl,"v1/").concat(this.group,"/cards/likes/").concat(e),{method:n,headers:{authorization:this.token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status," - ").concat(e.statusText))}))}},{key:"setAvatar",value:function(e){return fetch("".concat(this.baseUrl,"v1/").concat(this.group,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status," - ").concat(e.statusText))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"v1/").concat(this.group,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status," - ").concat(e.statusText))}))}}])&&$(t.prototype,n),r&&$(t,r),e}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(i,e);var t,n,r,o=X(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._popupSelector=e,t._form=t._popupSelector.querySelector(".popup__form"),t._submit=t._form.querySelector(".popup__submit"),t._defaultSubmitText=t._submit.textContent,t}return t=i,(n=[{key:"setSubmitCallback",value:function(e){this._submitCallback=e}},{key:"setEventListeners",value:function(){var e=this;Q(Z(i.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e._submitCallback()}))}}])&&K(t.prototype,n),r&&K(t,r),i}(C);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re,oe=new F("https://mesto.nomoreparties.co/","cohort-17","a3d68f30-ff26-46e5-95a8-5a60641ab807"),ie=new N({renderer:function(e){var t=fe(e).generateCard();i.append(t)}},i),ue=new J({name:".profile__info-name",about:".profile__info-job",avatar:".profile__image"}),ae=new ee(l);ae.setEventListeners();var ce=new z(p,{title:".popup__title_content-heading",image:".popup__image"});ce.setEventListeners();var se=new T(h,(function(e){m(h,"Сохранение..."),oe.setUserInfo(e).then((function(e){ue.setUserInfo(e)})).catch((function(e){return console.log(e)})).finally((function(){se.closePopup(),v(h,"Сохранить")}))}));se.setEventListeners();var le=new T(f,(function(e){m(f,"Сохранение..."),oe.setAvatar(e.update).then((function(){_.src=e.update})).catch((function(e){console.log(e)})).finally((function(){le.closePopup(),v(f,"Сохранить")}))}));function fe(e){return new k({options:e,template:".element-template",handleCardClick:ce.openPopup.bind(ce),myId:re,handleDeleteCard:function(e){ae.openPopup(),ae.setSubmitCallback((function(){m(l,"Удаление..."),oe.deleteCard(e.id).then((function(){ae.closePopup(),e.deleteCard()})).catch((function(e){return console.log(e)})).finally((function(){ae.closePopup(),v(l,"Удалить")}))}))},handleLikeCard:function(e){oe.setLike(e.id,e.isLiked).then((function(t){return e.updateLikes(t)})).catch((function(e){return console.log(e)}))}})}le.setEventListeners(),d.addEventListener("click",(function(){de.clearValidation(),le.openPopup()}));var pe=new T(s,(function(e){m(s,"Создание..."),oe.addCard(e.name,e.link).then((function(e){var t=fe(e).generateCard();i.prepend(t)})).catch((function(e){return console.log(e)})).finally((function(){pe.closePopup(),v(s,"Создать")}))}));pe.setEventListeners(),u.addEventListener("click",(function(){pe.openPopup(),_e.clearValidation()})),r.addEventListener("click",(function(){se.openPopup();var e=ue.getUserInfo();a.value=e.name,c.value=e.about,he.clearValidation()}));var he=new S(y.formEdit,y);he.enableValidation();var _e=new S(y.formCreate,y);_e.enableValidation();var de=new S(y.formEditAvatar,y);de.enableValidation(),Promise.all([oe.getUserInfo(),oe.getCards()]).then((function(e){var t=te(e,2),n=t[0],r=t[1];re=n._id,ue.setUserInfo(n),ie.renderItems(r)})).catch((function(e){return console.log(e)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL2Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9wb3B1cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9wb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy91c2VySW5mby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInBvcHVwT3BlbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvcm1FbGVtZW50IiwiY2FyZEVsZW1lbnRzIiwiYWRkQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJwb3B1cENyZWF0ZUNhcmQiLCJjb25maXJtUG9wdXAiLCJwcm9maWxlRWRpdCIsImltYWdlUG9wdXAiLCJlZGl0VXNlckluZm8iLCJwcm9maWxlSW1hZ2UiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1FZGl0IiwiZm9ybUNyZWF0ZSIsImZvcm1FZGl0QXZhdGFyIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImlucHV0SW52YWxpZCIsImVycm9yQ2xhc3MiLCJpc0xvYWRpbmciLCJwb3B1cFNlbGVjdG9yIiwidGV4dCIsInRleHRDb250ZW50IiwiaXNMb2FkZWQiLCJkZWZhdWx0VGV4dCIsIkNhcmQiLCJvcHRpb25zIiwidGVtcGxhdGUiLCJoYW5kbGVDYXJkQ2xpY2siLCJteUlkIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUxpa2VDYXJkIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9saWtlcyIsImxpa2VzIiwiX215SWQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSUQiLCJfaWQiLCJfb3duZXJJRCIsIm93bmVyIiwiX2hhbmRsZUxpa2VDYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsImNoaWxkcmVuIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJzcmMiLCJhbHQiLCJfY2hlY2tDYXJkSWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJfbGlrZUVsZW1lbnQiLCJyZW5kZXJMaWtlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxlbmd0aCIsImlzTGlrZWQiLCJyZW1vdmUiLCJ1cGRhdGVkTGlrZXMiLCJzb21lIiwiaXRlbSIsIkZvcm1WYWxpZGF0b3IiLCJfZm9ybVNlbGVjdG9yIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9zdWJtaXQiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfaW5wdXRJbnZhbGlkIiwiX2Vycm9yQ2xhc3MiLCJpbnB1dEl0ZW0iLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnB1dEVsZW1lbnQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiZXJyb3JJdGVtIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlUG9wdXAiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXQiLCJfcG9wdXBTZWxlY3RvciIsIl9mb3JtU3VibWl0IiwiX2Zvcm0iLCJfZGVmYXVsdFN1Ym1pdFRleHQiLCJfaW5wdXRPYmoiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiZGF0YSIsIl90aXRsZSIsInRpdGxlIiwiX2ltYWdlIiwiaW1hZ2UiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXJTZWxlY3RvciIsImluaXRpYWxDYXJkcyIsImVsZW1lbnQiLCJhcHBlbmQiLCJVc2VySW5mbyIsIl9hYm91dCIsImFib3V0IiwiX3Byb2ZpbGVJbWFnZSIsImF2YXRhciIsIkFwaSIsImJhc2VVcmwiLCJncm91cCIsInRva2VuIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElEIiwibGlrZVN0YXRlIiwiUG9wdXBDb25maXJtIiwiY2FsbGJhY2siLCJfc3VibWl0Q2FsbGJhY2siLCJteVVzZXJJZCIsImFwaSIsImNhcmRMaXN0IiwiY2FyZEVsZW1lbnQiLCJyZW5kZXJDYXJkIiwiZ2VuZXJhdGVDYXJkIiwidXNlckluZm8iLCJwb3B1cENvbmZpcm0iLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwV2l0aEltZyIsImVkaXRVc2VyUHJvZmlsZVBvcHVwIiwic2V0VXNlckluZm8iLCJpbmZvIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiY2hhbmdlQXZhdGFyUG9wdXAiLCJzZXRBdmF0YXIiLCJ1cGRhdGUiLCJvcGVuUG9wdXAiLCJjYXJkIiwic2V0U3VibWl0Q2FsbGJhY2siLCJkZWxldGVDYXJkIiwic2V0TGlrZSIsInVwZGF0ZUxpa2VzIiwiZm9ybUVkaXRBdmF0YXJWYWxpZGF0b3IiLCJjbGVhclZhbGlkYXRpb24iLCJjcmVhdGVDYXJkUG9wdXAiLCJhZGRDYXJkIiwicHJlcGVuZCIsImZvcm1DcmVhdGVWYWxpZGF0b3IiLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwiZm9ybUVkaXRWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiYWxsIiwiZ2V0Q2FyZHMiLCJyZWNlaXZlZENhcmRzIiwicmVuZGVySXRlbXMiXSwi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eEIvQyxRQUFRZ0QsSUFBSSxDQUFDbEMsR0FBSStCLGNBQWUvQixHQUFJbUMsYUFDakNyRCxNQUFLLFlBQStCLGNBQTdCZ0QsRUFBNkIsS0FBbkJNLEVBQW1CLEtBQ25DckMsR0FBVytCLEVBQVNuSixJQUNwQjBILEdBQVNLLFlBQVlvQixHQUNyQjdCLEdBQVNvQyxZQUFZRCxNQUp6QixPQU1TLFNBQUN4QixHQUFELE9BQVdDLFFBQVFDLElBQUlGIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBwb3B1cE9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tZWRpdFwiKTtcclxuY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5jb25zdCBjYXJkRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IG5hbWVJbnB1dCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X25hbWVcIik7XHJcbmNvbnN0IGpvYklucHV0ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfam9iXCIpO1xyXG5jb25zdCBwb3B1cENyZWF0ZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2pzLWNyZWF0ZVwiKTtcclxuY29uc3QgY29uZmlybVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNqcy1jb25maXJtXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjanMtdXBkYXRlXCIpO1xyXG5jb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNqcy1pbWFnZVwiKTtcclxuY29uc3QgZWRpdFVzZXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNqcy1lZGl0XCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mby1uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLWpvYlwiKTtcclxuY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRcIik7XHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgZm9ybUVkaXQ6IFwiI2pzLWVkaXRcIixcclxuICBmb3JtQ3JlYXRlOiBcIiNqcy1jcmVhdGVcIixcclxuICBmb3JtRWRpdEF2YXRhcjogXCIjanMtdXBkYXRlXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXRcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zdWJtaXRfaW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiLnBvcHVwX19pbnB1dF9lcnJvclwiLFxyXG4gIGlucHV0SW52YWxpZDogXCJwb3B1cF9faW5wdXRfaW52YWxpZFwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X2Vycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5jb25zdCBwb3B1cEltYWdlV2l0aENvbmZpZyA9IHtcclxuICB0aXRsZTogXCIucG9wdXBfX3RpdGxlX2NvbnRlbnQtaGVhZGluZ1wiLFxyXG4gIGltYWdlOiBcIi5wb3B1cF9faW1hZ2VcIixcclxufTtcclxuY29uc3QgdXNlckRhdGEgPSB7XHJcbiAgbmFtZTogXCIucHJvZmlsZV9faW5mby1uYW1lXCIsXHJcbiAgYWJvdXQ6IFwiLnByb2ZpbGVfX2luZm8tam9iXCIsXHJcbiAgYXZhdGFyOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHtcclxuICBwb3B1cE9wZW4sXHJcbiAgZm9ybUVsZW1lbnQsXHJcbiAgY2FyZEVsZW1lbnRzLFxyXG4gIGFkZEJ1dHRvbixcclxuICBuYW1lSW5wdXQsXHJcbiAgam9iSW5wdXQsXHJcbiAgY29uZmlnLFxyXG4gIHBvcHVwSW1hZ2VXaXRoQ29uZmlnLFxyXG4gIHVzZXJEYXRhLFxyXG4gIHByb2ZpbGVJbWFnZSxcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlSm9iLFxyXG4gIHByb2ZpbGVFZGl0LFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIGNvbmZpcm1Qb3B1cCxcclxuICBpbWFnZVBvcHVwLFxyXG4gIGVkaXRVc2VySW5mbyxcclxuICBwb3B1cENyZWF0ZUNhcmQsXHJcbn07XHJcbiIsImZ1bmN0aW9uIGlzTG9hZGluZyhwb3B1cFNlbGVjdG9yLCB0ZXh0KSB7XHJcbiAgY29uc3QgYnV0dG9uID0gcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXRcIik7XHJcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNMb2FkZWQocG9wdXBTZWxlY3RvciwgZGVmYXVsdFRleHQpIHtcclxuICBjb25zdCBidXR0b24gPSBwb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdFwiKTtcclxuXHJcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gZGVmYXVsdFRleHQ7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGlzTG9hZGluZywgaXNMb2FkZWQgfTtcclxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHtcclxuICAgIG9wdGlvbnMsXHJcbiAgICB0ZW1wbGF0ZSxcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIG15SWQsXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkLFxyXG4gICAgaGFuZGxlTGlrZUNhcmQsXHJcbiAgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG9wdGlvbnMubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBvcHRpb25zLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBvcHRpb25zLmxpa2VzO1xyXG4gICAgdGhpcy5fbXlJZCA9IG15SWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcclxuICAgIHRoaXMuX2NhcmRJRCA9IG9wdGlvbnMuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJJRCA9IG9wdGlvbnMub3duZXIuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmQgPSBoYW5kbGVMaWtlQ2FyZDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxyXG4gICAgICAuY2hpbGRyZW5bMF07XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19waG90b1wiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3Bob3RvXCIpLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faGVhZGluZ1wiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBpZiAoIXRoaXMuX2NoZWNrQ2FyZElkKCkpXHJcbiAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGVcIilcclxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2RlbGV0ZV9pc0hpZGRlblwiKTtcclxuICAgIHRoaXMuX2xpa2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VcIik7XHJcbiAgICB0aGlzLnJlbmRlckxpa2UoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9jaGVja0NhcmRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9vd25lcklEID09PSB0aGlzLl9teUlkO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmQodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQodGhpcyk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19waG90b1wiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX215SWQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTGlrZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZWxlbWVudF9fbGlrZS1jb3VudGVyXCJcclxuICAgICkudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19saWtlX3N0YXRlX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19saWtlX3N0YXRlX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2VzKHVwZGF0ZWRMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSB1cGRhdGVkTGlrZXMubGlrZXM7XHJcbiAgICB0aGlzLnJlbmRlckxpa2UoKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXQgaWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZElEO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yLCBjb25maWcpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0SW52YWxpZCA9IGNvbmZpZy5pbnB1dEludmFsaWQ7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEl0ZW0sIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0SXRlbS5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRJdGVtKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRJdGVtLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0SXRlbSkge1xyXG4gICAgY29uc3QgaXNJbnB1dE5vdFZhbGlkID0gIWlucHV0SXRlbS52YWxpZGl0eS52YWxpZDtcclxuICAgIGlmIChpc0lucHV0Tm90VmFsaWQpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaW5wdXRJdGVtLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgICBpbnB1dEl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEludmFsaWQpO1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEl0ZW0sIGVycm9yTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEl0ZW0pO1xyXG4gICAgICBpbnB1dEl0ZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEludmFsaWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIGNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IHRoaXMuX2lucHV0TGlzdC5zb21lKFxyXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGhhc0ludmFsaWRJbnB1dDtcclxuICB9XHJcblxyXG4gIGNsZWFyVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9pbnB1dEVycm9yQ2xhc3MpLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRJdGVtKSA9PiB7XHJcbiAgICAgIGlucHV0SXRlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0SW52YWxpZCk7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGVycm9yTGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRFcnJvckNsYXNzKVxyXG4gICAgKTtcclxuICAgIGVycm9yTGlzdC5mb3JFYWNoKChlcnJvckl0ZW0pID0+IHtcclxuICAgICAgZXJyb3JJdGVtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEl0ZW0pID0+IHtcclxuICAgICAgaW5wdXRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0SXRlbSk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9pcy1vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9pcy1vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQgIT09IGUuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9wb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9zdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdFwiKTtcclxuICAgIHRoaXMuX2RlZmF1bHRTdWJtaXRUZXh0ID0gdGhpcy5fc3VibWl0LnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRPYmogPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0T2JqW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRPYmo7XHJcbiAgfVxyXG5cclxuICBjbG9zZVBvcHVwKCkge1xyXG4gICAgc3VwZXIuY2xvc2VQb3B1cCgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fZm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBkYXRhKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkYXRhLnRpdGxlKTtcclxuICAgIHRoaXMuX2ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkYXRhLmltYWdlKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cCh0aXRsZSwgaW1hZ2UpIHtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG5cclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aXRsZTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGltYWdlO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcykge1xyXG4gICAgaW5pdGlhbENhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS5uYW1lKTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkYXRhLmFib3V0KTtcclxuICAgIHRoaXMuX3Byb2ZpbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS5hdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fcHJvZmlsZUltYWdlLnNyYyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XHJcbiAgICAgIHRoaXMuX3Byb2ZpbGVJbWFnZS5zcmMgPSBkYXRhLmF2YXRhcjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihiYXNlVXJsLCBncm91cCwgdG9rZW4pIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XHJcbiAgICB0aGlzLnRva2VuID0gdG9rZW47XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9djEvJHt0aGlzLmdyb3VwfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfSAtICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfXYxLyR7dGhpcy5ncm91cH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c30gLSAke3Jlcy5zdGF0dXNUZXh0fWApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9djEvJHt0aGlzLmdyb3VwfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9IC0gJHtyZXMuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKG5hbWUsIGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9djEvJHt0aGlzLmdyb3VwfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c30gLSAke3Jlcy5zdGF0dXNUZXh0fWApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldExpa2UoY2FyZElELCBsaWtlU3RhdGUpIHtcclxuICAgIGNvbnN0IG1ldGhvZCA9IGxpa2VTdGF0ZSA/IFwiREVMRVRFXCIgOiBcIlBVVFwiO1xyXG5cclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9djEvJHt0aGlzLmdyb3VwfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZCxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfSAtICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9djEvJHt0aGlzLmdyb3VwfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy50b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YSxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfSAtICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9djEvJHt0aGlzLmdyb3VwfS9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfSAtICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0XCIpO1xyXG4gICAgdGhpcy5fZGVmYXVsdFN1Ym1pdFRleHQgPSB0aGlzLl9zdWJtaXQudGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7XHJcbiAgcG9wdXBPcGVuLFxyXG4gIGNhcmRFbGVtZW50cyxcclxuICBhZGRCdXR0b24sXHJcbiAgbmFtZUlucHV0LFxyXG4gIGpvYklucHV0LFxyXG4gIGNvbmZpZyxcclxuICBwb3B1cEltYWdlV2l0aENvbmZpZyxcclxuICB1c2VyRGF0YSxcclxuICBwcm9maWxlSW1hZ2UsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZUVkaXQsXHJcbiAgY29uZmlybVBvcHVwLFxyXG4gIGltYWdlUG9wdXAsXHJcbiAgZWRpdFVzZXJJbmZvLFxyXG4gIHBvcHVwQ3JlYXRlQ2FyZCxcclxufSBmcm9tIFwiLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgaXNMb2FkaW5nLCBpc0xvYWRlZCB9IGZyb20gXCIuL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9jb21wb25lbnRzL3BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL2NvbXBvbmVudHMvcG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9zZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL3VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4vY29tcG9uZW50cy9hcGkuanNcIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi9jb21wb25lbnRzL3BvcHVwQ29uZmlybS5qc1wiO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaShcclxuICBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby9cIixcclxuICBcImNvaG9ydC0xN1wiLFxyXG4gIFwiYTNkNjhmMzAtZmYyNi00NmU1LTk1YTgtNWE2MDY0MWFiODA3XCJcclxuKTtcclxuXHJcbmxldCBteVVzZXJJZDtcclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSByZW5kZXJDYXJkKGl0ZW0pO1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgIGNhcmRFbGVtZW50cy5hcHBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNhcmRFbGVtZW50c1xyXG4pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odXNlckRhdGEpO1xyXG5cclxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwQ29uZmlybShjb25maXJtUG9wdXApO1xyXG5cclxucG9wdXBDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VQb3B1cCwgcG9wdXBJbWFnZVdpdGhDb25maWcpO1xyXG5wb3B1cFdpdGhJbWcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRVc2VyUHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdFVzZXJJbmZvLCAoZGF0YSkgPT4ge1xyXG4gIGlzTG9hZGluZyhlZGl0VXNlckluZm8sIFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIik7XHJcbiAgYXBpXHJcbiAgICAuc2V0VXNlckluZm8oZGF0YSlcclxuICAgIC50aGVuKChpbmZvKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGluZm8pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdFVzZXJQcm9maWxlUG9wdXAuY2xvc2VQb3B1cCgpO1xyXG4gICAgICBpc0xvYWRlZChlZGl0VXNlckluZm8sIFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuZWRpdFVzZXJQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGNoYW5nZUF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZUVkaXQsIChkYXRhKSA9PiB7XHJcbiAgaXNMb2FkaW5nKHByb2ZpbGVFZGl0LCBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCIpO1xyXG4gIGFwaVxyXG4gICAgLnNldEF2YXRhcihkYXRhLnVwZGF0ZSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgcHJvZmlsZUltYWdlLnNyYyA9IGRhdGEudXBkYXRlO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2hhbmdlQXZhdGFyUG9wdXAuY2xvc2VQb3B1cCgpO1xyXG4gICAgICBpc0xvYWRlZChwcm9maWxlRWRpdCwgXCLQodC+0YXRgNCw0L3QuNGC0YxcIik7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jaGFuZ2VBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtRWRpdEF2YXRhclZhbGlkYXRvci5jbGVhclZhbGlkYXRpb24oKTtcclxuICBjaGFuZ2VBdmF0YXJQb3B1cC5vcGVuUG9wdXAoKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0pIHtcclxuICByZXR1cm4gbmV3IENhcmQoe1xyXG4gICAgb3B0aW9uczogaXRlbSxcclxuICAgIHRlbXBsYXRlOiBcIi5lbGVtZW50LXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IHBvcHVwV2l0aEltZy5vcGVuUG9wdXAuYmluZChwb3B1cFdpdGhJbWcpLFxyXG4gICAgbXlJZDogbXlVc2VySWQsXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkOiAoY2FyZCkgPT4ge1xyXG4gICAgICBwb3B1cENvbmZpcm0ub3BlblBvcHVwKCk7XHJcbiAgICAgIHBvcHVwQ29uZmlybS5zZXRTdWJtaXRDYWxsYmFjaygoKSA9PiB7XHJcbiAgICAgICAgaXNMb2FkaW5nKGNvbmZpcm1Qb3B1cCwgXCLQo9C00LDQu9C10L3QuNC1Li4uXCIpO1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5pZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgcG9wdXBDb25maXJtLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpKVxyXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cENvbmZpcm0uY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgICBpc0xvYWRlZChjb25maXJtUG9wdXAsIFwi0KPQtNCw0LvQuNGC0YxcIik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlTGlrZUNhcmQ6IChjYXJkKSA9PiB7XHJcbiAgICAgIGFwaVxyXG4gICAgICAgIC5zZXRMaWtlKGNhcmQuaWQsIGNhcmQuaXNMaWtlZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiBjYXJkLnVwZGF0ZUxpa2VzKHJlcykpXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcclxuICAgIH0sXHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ3JlYXRlQ2FyZCwgKGRhdGEpID0+IHtcclxuICBpc0xvYWRpbmcocG9wdXBDcmVhdGVDYXJkLCBcItCh0L7Qt9C00LDQvdC40LUuLi5cIik7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZChkYXRhLm5hbWUsIGRhdGEubGluaylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IHJlbmRlckNhcmQocmVzKTtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICBjYXJkRWxlbWVudHMucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBjcmVhdGVDYXJkUG9wdXAuY2xvc2VQb3B1cCgpO1xyXG4gICAgICBpc0xvYWRlZChwb3B1cENyZWF0ZUNhcmQsIFwi0KHQvtC30LTQsNGC0YxcIik7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jcmVhdGVDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNyZWF0ZUNhcmRQb3B1cC5vcGVuUG9wdXAoKTtcclxuICBmb3JtQ3JlYXRlVmFsaWRhdG9yLmNsZWFyVmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbnBvcHVwT3Blbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRVc2VyUHJvZmlsZVBvcHVwLm9wZW5Qb3B1cCgpO1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gIGpvYklucHV0LnZhbHVlID0gdXNlckRhdGEuYWJvdXQ7XHJcbiAgZm9ybUVkaXRWYWxpZGF0b3IuY2xlYXJWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgZm9ybUVkaXRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcuZm9ybUVkaXQsIGNvbmZpZyk7XHJcbmZvcm1FZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1DcmVhdGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcuZm9ybUNyZWF0ZSwgY29uZmlnKTtcclxuZm9ybUNyZWF0ZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBmb3JtRWRpdEF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbmZpZy5mb3JtRWRpdEF2YXRhcixcclxuICBjb25maWdcclxuKTtcclxuZm9ybUVkaXRBdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0Q2FyZHMoKV0pXHJcbiAgLnRoZW4oKFt1c2VyRGF0YSwgcmVjZWl2ZWRDYXJkc10pID0+IHtcclxuICAgIG15VXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMocmVjZWl2ZWRDYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9